<!doctype html><html lang=en-us><head><link rel=preload href=../../lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=../../lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Boa Constructor Introduction | Alec Benson</title><link rel=canonical href=/posts/boa_constructor/><meta name=description content="Thoughts on software, programming languages, and everything else."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Boa Constructor Introduction"><meta property="og:description" content="An introduction to my thesis, Boa Constructor. Also provides links and references necessary to understand and work with it. "><meta property="og:type" content="article"><meta property="og:url" content="/posts/boa_constructor/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-21T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Boa Constructor Introduction"><meta name=twitter:description content="An introduction to my thesis, Boa Constructor. Also provides links and references necessary to understand and work with it. "><link rel=stylesheet href=../../css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=../../images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=../../posts/>Posts</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fboa_constructor%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=%2fposts%2fboa_constructor%2f&text=Boa%20Constructor%20Introduction" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fboa_constructor%2f&is_video=false&description=Boa%20Constructor%20Introduction" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Boa%20Constructor%20Introduction&body=Check out this article: %2fposts%2fboa_constructor%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fboa_constructor%2f&name=Boa%20Constructor%20Introduction&description=An%20introduction%20to%20my%20thesis%2c%20Boa%20Constructor.%20Also%20provides%20links%20and%20references%20necessary%20to%20understand%20and%20work%20with%20it.%20" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fboa_constructor%2f&t=Boa%20Constructor%20Introduction" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#translation-grammars>Translation Grammars</a><ul><li><a href=#rule-contents>Rule Contents</a></li><li><a href=#translation-definitions>Translation Definitions</a></li><li><a href=#extension-files>Extension Files</a></li></ul></li><li><a href=#survey-setup>Survey Setup</a></li><li><a href=#resources>Resources</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Boa Constructor Introduction</h1><div class=meta><div class=postdate><time datetime="2022-03-21 00:00:00 +0000 UTC" itemprop=datePublished>2022-03-21</time></div></div></header><div class=content itemprop=articleBody><h2 id=background>Background</h2><p>Boa Constructor is an extension oriented compiler frontend for the Python programming language. It works primarily through the definition of translation grammars, which define the original and translated version of the language and can be composed easily. Boa Constructor is an additional frontend for Python that parses the file, outputs its translation, and then runs the translation through a standard Python interpreter. Boa Constructor builds a parse tree of the input file, translates each component node by node, and then outputs this code for execution. In order to work with this properly, I would suggest that you have some understanding of grammars and automata. If necessary, please take a moment to review the links in resources.</p><h2 id=translation-grammars>Translation Grammars</h2><p>Translation grammars are styled in the same way the official Python grammar is and uses a mixture of EBNF and PEG features. Translation grammars can be left recursive, and each rule is formatted as:</p><pre tabindex=0><code>ruleName: ruleContents { translationDefinition } 
        | alternativeContents { translationDefinition }
</code></pre><h3 id=rule-contents>Rule Contents</h3><p>Rule names are typically in camel case (although this is a style choice, not a requirement).<br>The rule contents (and alternative contents) are rule definitions that can contain:</p><ul><li>literal strings (":", must use double quotation marks)</li><li>tokens (in all capital letters, defined in the Python standard library Tokenize package)</li><li>other rule names</li></ul><p>As well as this, ruleContents can use:</p><ul><li>positive and negative lookaheads (denoted with & and !)</li><li>optional blocks (either denoted by square brackets around some contents, or a question mark (?) following the optional contents)</li><li>repetitions (with * denoting any number of repetitions, and + denoting more than 1 repetition)</li><li>groups (some section of ruleContents wrapped in parentheses)</li><li>cuts (denoted with ~) that tell the parser to commit to that rule even if it fails</li></ul><h3 id=translation-definitions>Translation Definitions</h3><p>Translation definitions can include:</p><ul><li>string literals</li><li>the special <code>TABBED</code> and <code>ENDTABBED</code> tokens (denoting that contents inside should be tabbed in a level)</li><li>the <code>STARTLOOP</code> and <code>ENDLOOP</code> tokens (denoting that you should loop until any inner contents are empty), and</li><li>the <code>OPTIONAL</code> and <code>ENDOPTIONAL</code> tokens (denoting that the section inside does not have to have contents)</li></ul><p>String literals in translation definitions need to use single quotes.</p><p>As well as these special tokens, the power in translations comes directly from accessing the inner children of that parse node, which is done by starting a variable name with _ and following this with some letter in the English alphabet from a to z. This letter represents which variable in the parse nodes children you&rsquo;re accessing, with <code>a</code> representing the first child and <code>z</code> representing the 26th child. As well as this, you can index components of that child node by using <code>[index, subindex]</code> (specifically useful when you&rsquo;re accessing something that was part of a group). These translation definitions are quite powerful and can be used to build fully functioning translations from a parse node.</p><p>An example of a rule is as follows:</p><pre tabindex=0><code>assignment:
    | NAME &#39;:&#39; expression [&#39;=&#39; annotated_rhs ] { _a &#34;:&#34; _b } 
    | single_target augassign ~ (yield_expr | star_expressions) { _a _b }
</code></pre><p>Another example of a rule with a translation follows:</p><pre tabindex=0><code>list:
    | &#39;[&#39; [star_named_expressions] &#39;]&#39; { &#34;[&#34; OPTIONAL _a ENDOPTIONAL &#34;]&#34; }
</code></pre><p>In this example, the first alternative is the traditional Python 3.10 list, in which the resulting translation (and original syntax) is defined in the translation.</p><h3 id=extension-files>Extension Files</h3><p>Actual extensions in Boa Constructor are Python files that contain a multiline string called &ldquo;extension&rdquo;, that contain the actual rule contents, and a list of strings called keywords contains any necessary keywords for the extension.</p><p>Keywords are any strings that are used directly as strings in a grammar rule, in the first example below these are true and false, as they need to be parsed differently from generic strings in a programming language.
An example of a full extension is as follows:</p><pre tabindex=0><code>extension = &#34;&#34;&#34;
atom:
    | NAME { _a } 
    | &#39;True&#39; { &#34;True&#34; } 
    | &#39;False&#39; { &#34;False&#34; }
    | &#39;true&#39; { &#34;True&#34; }
    | &#39;false&#39; { &#34;False&#34; }
    | &#39;None&#39; { &#34;None&#34; }
    | strings { _a } 
    | NUMBER { _a } 
    | (tuple | group | genexp) { _a } 
    | (list | listcomp) { _a[0] } 
    | (dict | set | dictcomp | setcomp) { _a } 
    | &#39;...&#39; { &#34;...&#34; }
&#34;&#34;&#34;

keywords = [
    &#34;&#39;true&#39;&#34;,
    &#34;&#39;false&#39;&#34;,
]
</code></pre><p>This extension allows a user to type <code>true</code> and <code>false</code> with entirely lowercase letters and Python to accept these as valid proxies for the <code>True</code> and <code>False</code> boolean keywords.
Another example of an extension:</p><pre tabindex=0><code>extension = &#34;&#34;&#34;
simple_stmt:
    | assignment { _a } 
    | star_expressions { _a } 
    | return_stmt { _a } 
    | import_stmt { _a } 
    | raise_stmt { _a } 
    | &#39;pass&#39; { &#34;pass&#34; } 
    | del_stmt { _a } 
    | yield_stmt { _a } 
    | assert_stmt { _a } 
    | &#39;break&#39; { &#34;break&#34; } 
    | &#39;continue&#39; { &#34;continue&#34; } 
    | global_stmt { _a } 
    | nonlocal_stmt { _a }
    | &#39;$&#39; { &#34;import pdb; pdb.set_trace()&#34; }

&#34;&#34;&#34;

keywords = [
  &#34;&#39;$&#39;&#34;,
]
</code></pre><p>This extension allows a user to type <code>$</code> in a Python program, and translates this to a statement importing pdb (the Python Debugger) and calling it to set a breakpoint.</p><p>Another example of a full extension:</p><pre tabindex=0><code>extension = &#34;&#34;&#34;
list:
    | &#39;[&#39; [star_named_expressions] &#39;]&#39; { &#34;[&#34; OPTIONAL _a ENDOPTIONAL &#34;]&#34; }
    | &#39;[&#39; NUMBER &#39;$&#39; NUMBER &#39;]&#39; { &#34;[&#34; _a &#34;]&#34; &#34;*&#34; _b }
&#34;&#34;&#34;

keywords = [
    &#34;&#39;$&#39;&#34;,
]
</code></pre><p>This extension allows the user to type <code>[3$4]</code> which creates a list containing 4 integers with a value of 3. So, the translation takes the first returned value (the number <code>_a</code>) and the second returned value (the number <code>_b</code>) and translates this to <code>[NUMBER] * NUMBER</code>, or in our example <code>[3] * 4</code>.</p><h2 id=survey-setup>Survey Setup</h2><p>You will be provided with a link to a replit online programming environment, and a link to the form for this survey. We ask that you spend 30 minutes trying to implement an extension, which is an extension to the list rule in Python&rsquo;s regular grammar. This rule should take input in the form <code>[1 ... 10]</code> and convert this to <code>range(1, 10)</code>.</p><p>Note that the numbers in this should be dynamic. In your replit environment, you should have a file called &ldquo;rust_range.py&rdquo; that is in the extensions folder. You&rsquo;ll be editing this file for this experiment. When you run the code with the &ldquo;run&rdquo; button, it should print <code>Input could not be parsed</code> to the terminal.
This means that the extension is not implemented. When you edit the file &ldquo;rust_range.py&rdquo; and run, you will know it has succeeded when the program prints out <code>range(0, 10)</code>.</p><p>The file &ldquo;test_input.py&rdquo; contains the contents you are trying to run through Boa Constructor. Please do not edit this file, but you are free to look at it as you work.</p><h2 id=resources>Resources</h2><ul><li><a href=https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form>EBNF Grammar Wiki Page</a></li><li><a href=https://condor.depaul.edu/ichu/csc447/notes/wk3/BNF.pdf>EBNF Presentation</a></li></ul></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=../../posts/>Posts</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#translation-grammars>Translation Grammars</a><ul><li><a href=#rule-contents>Rule Contents</a></li><li><a href=#translation-definitions>Translation Definitions</a></li><li><a href=#extension-files>Extension Files</a></li></ul></li><li><a href=#survey-setup>Survey Setup</a></li><li><a href=#resources>Resources</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fboa_constructor%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=%2fposts%2fboa_constructor%2f&text=Boa%20Constructor%20Introduction" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fboa_constructor%2f&is_video=false&description=Boa%20Constructor%20Introduction" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Boa%20Constructor%20Introduction&body=Check out this article: %2fposts%2fboa_constructor%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=%2fposts%2fboa_constructor%2f&title=Boa%20Constructor%20Introduction" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fboa_constructor%2f&name=Boa%20Constructor%20Introduction&description=An%20introduction%20to%20my%20thesis%2c%20Boa%20Constructor.%20Also%20provides%20links%20and%20references%20necessary%20to%20understand%20and%20work%20with%20it.%20" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fboa_constructor%2f&t=Boa%20Constructor%20Introduction" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Alec Benson</div><div class=footer-right><nav><ul><li><a href=../../posts/>Posts</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=../../lib/font-awesome/css/all.min.css><script src=../../lib/jquery/jquery.min.js></script>
<script src=../../js/main.js></script>
<script src=../../js/code-copy.js></script></html>